<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security6">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${course.name}">Chi tiết Khóa học</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

<div th:replace="~{fragments/header :: header}"></div>

<div class="max-w-7xl mx-auto px-6 py-12 md:flex">

    <main class="w-full md:w-3/4 lg:w-2/3 md:pr-8">

        <a th:href="@{/courses}" class="inline-flex items-center text-blue-600 hover:text-blue-800 mb-4 group">
            <span class="material-icons mr-1 transition-transform group-hover:-translate-x-1">arrow_back</span>
            Quay lại danh sách
        </a>
        <article>
            <span class="text-lg font-semibold text-blue-600" th:text="${course.category?.name}">Danh mục</span>

            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 my-4" th:text="${course.name}">
                Tiêu đề khóa học
            </h1>

            <p class="text-xl text-gray-600 mb-6"
               th:text="${T(com.codecampus.util.BlogUtil).getBriefInfo(course.description)}">
                Thông tin tóm tắt về khóa học...
            </p>

            <img th:src="@{${course.thumbnailUrl}}" alt="Thumbnail" class="w-full rounded-2xl shadow-lg mb-8" />

            <div class="prose prose-lg max-w-none blog-content"
                 th:utext="${course.description}">
            </div>

        </article>

        <div class="bg-white p-5 rounded-lg shadow-sm border border-blue-600 mt-8">
            <h3 class="font-bold text-lg mb-3">Đăng ký ngay</h3>

            <div th:if="${lowestPriceOpt.isPresent()}">
                <div th:with="lowestPrice=${lowestPriceOpt.get()}">
                    <span th:if="${lowestPrice.salePrice != null}"
                          class="text-3xl font-bold text-red-600"
                          th:text="${#numbers.formatDecimal(lowestPrice.salePrice, 0, 'COMMA', 0, 'POINT') + ' đ'}">
                    </span>
                    <span th:if="${lowestPrice.salePrice != null}"
                          class="text-xl text-gray-500 line-through ml-2"
                          th:text="${#numbers.formatDecimal(lowestPrice.listPrice, 0, 'COMMA', 0, 'POINT') + ' đ'}">
                    </span>
                    <span th:unless="${lowestPrice.salePrice != null}"
                          class="text-3xl font-bold text-gray-900"
                          th:text="${#numbers.formatDecimal(lowestPrice.listPrice, 0, 'COMMA', 0, 'POINT') + ' đ'}">
                    </span>
                </div>
            </div>
            <div th:unless="${lowestPriceOpt.isPresent()}">
                <span class="text-3xl font-bold text-green-600">Miễn phí</span>
            </div>

            <a th:href="@{/register-course/{id}(id=${course.id})}"
               class="mt-4 block w-full text-center bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 text-lg">
                Đăng ký ngay
            </a>
        </div>
    </main>

    <div th:replace="~{fragments/course-sidebar :: course-sidebar}"></div>
</div>
<div th:replace="~{fragments/footer :: footer}"></div>

</body>
</html>