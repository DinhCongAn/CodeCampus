<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security6">
<head>
    <meta charset="UTF-8">
    <title>Kh√≥a h·ªçc c·ªßa t√¥i</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

<!-- Header -->
<div th:replace="~{fragments/header :: header}"></div>

<!-- N·ªôi dung ch√≠nh -->
<div class="container mx-auto max-w-5xl p-6 my-12">
    <h1 class="text-3xl font-bold mb-8 text-gray-800 text-center">üéì Kh√≥a h·ªçc c·ªßa t√¥i</h1>

    <!-- Th√¥ng b√°o th√†nh c√¥ng -->
    <div th:if="${successMessage}"
         class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6 text-center font-medium shadow-sm">
        <span th:text="${successMessage}"></span>
    </div>

    <!-- Th√¥ng b√°o l·ªói -->
    <div th:if="${errorMessage}"
         class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-center font-medium shadow-sm">
        <span th:text="${errorMessage}"></span>
    </div>

    <!-- B·∫£ng danh s√°ch kh√≥a h·ªçc -->
    <div class="bg-white shadow-xl rounded-xl overflow-hidden border border-gray-200">
        <table class="min-w-full text-sm text-gray-700">
            <thead class="bg-gray-100 border-b border-gray-200">
            <tr>
                <th class="py-3 px-6 text-left font-semibold">Kh√≥a h·ªçc</th>
                <th class="py-3 px-6 text-left font-semibold">G√≥i</th>
                <th class="py-3 px-6 text-left font-semibold">Ng√†y ƒëƒÉng k√Ω</th>
                <th class="py-3 px-6 text-left font-semibold text-center">Tr·∫°ng th√°i</th>
                <th class="py-3 px-6 text-left font-semibold text-center">H√†nh ƒë·ªông</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="reg : ${registrations}" class="border-b hover:bg-gray-50 transition">
                <!-- T√™n kh√≥a h·ªçc -->
                <td class="py-4 px-6 font-medium text-gray-900" th:text="${reg.course.name}"></td>

                <!-- G√≥i -->
                <td class="py-4 px-6" th:text="${reg.pricePackage.name}"></td>

                <!-- Ng√†y ƒëƒÉng k√Ω -->
                <td class="py-4 px-6" th:text="${#temporals.format(reg.registrationTime, 'dd/MM/yyyy')}"></td>

                <!-- Tr·∫°ng th√°i -->
                <td class="py-4 px-6 text-center">
                    <span th:if="${reg.status == 'PENDING'}"
                          class="inline-block px-3 py-1 text-xs font-semibold text-yellow-800 bg-yellow-200 rounded-full">
                        ‚è≥ Ch·ªù x√©t duy·ªát
                    </span>
                    <span th:if="${reg.status == 'COMPLETED'}"
                          class="inline-block px-3 py-1 text-xs font-semibold text-green-800 bg-green-200 rounded-full">
                        ‚úÖ ƒê√£ k√≠ch ho·∫°t
                    </span>
                </td>

                <!-- H√†nh ƒë·ªông -->
                <td class="py-4 px-6 text-center">
                    <a th:if="${reg.status == 'PENDING'}"
                       th:href="@{/payment-info}"
                       class="inline-block bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg text-sm transition">
                        üí≥ Xem thanh to√°n
                    </a>

                    <a th:if="${reg.status == 'COMPLETED'}"
                       th:href="@{/learning/{courseId}(courseId=${reg.course.id})}"
                       class="inline-block bg-blue-500 hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg text-sm transition">
                        üöÄ V√†o h·ªçc
                    </a>
                </td>
            </tr>

            <!-- N·∫øu kh√¥ng c√≥ kh√≥a h·ªçc -->
            <tr th:if="${#lists.isEmpty(registrations)}">
                <td colspan="5" class="text-center py-8 text-gray-500 italic">
                    B·∫°n ch∆∞a ƒëƒÉng k√Ω kh√≥a h·ªçc n√†o.
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Footer -->
<div th:replace="~{fragments/footer :: footer}"></div>

</body>
</html>
