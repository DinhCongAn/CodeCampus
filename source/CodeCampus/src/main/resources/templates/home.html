<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${pageTitle}">CodeCampus - H·ªçc L·∫≠p Tr√¨nh ƒê·ªÉ ƒêi L√†m</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="/images/logo.png" />
</head>

<body class="bg-gray-50 text-gray-800 font-sans">
<div th:replace="~{fragments/header :: header}"></div>

<div class="flex max-w-7xl mx-auto mt-4">
    <aside class="w-20 flex flex-col items-center space-y-8 pt-6">
        <a href="/home" class="flex flex-col items-center text-gray-600 hover:text-blue-600">
            <div class="bg-gray-100 p-3 rounded-xl mb-1">üè†</div>
            <span class="text-sm">Trang ch·ªß</span>
        </a>
        <a href="/lotrinh" class="flex flex-col items-center text-gray-600 hover:text-blue-600">
            <div class="bg-gray-100 p-3 rounded-xl mb-1">üß≠</div>
            <span class="text-sm">L·ªô tr√¨nh</span>
        </a>
        <a href="/baiviet" class="flex flex-col items-center text-gray-600 hover:text-blue-600">
            <div class="bg-gray-100 p-3 rounded-xl mb-1">üìù</div>
            <span class="text-sm">B√†i vi·∫øt</span>
        </a>
    </aside>

    <main class="flex-1 px-6 space-y-16">
        <section class="relative rounded-2xl overflow-hidden shadow-lg group">
            <div class="flex transition-transform duration-700 ease-in-out" id="slider-wrapper">
                <div th:each="slider : ${sliders}"
                     class="min-w-full flex justify-between items-center px-10 py-16 text-white"
                     style="background: linear-gradient(to right, #6D28D9, #4F46E5);">
                    <div class="max-w-lg">
                        <h2 class="text-4xl font-bold mb-4" th:text="${slider.title}">Slider Title</h2>
                        <p class="mb-6 text-lg" th:text="${slider.description}">Slider Description</p>
                        <a th:href="${slider.linkUrl}"
                           class="px-6 py-3 bg-white text-indigo-600 font-semibold rounded-full hover:bg-gray-100">
                            <span>Xem chi ti·∫øt</span>
                        </a>
                    </div>
                    <img th:src="${slider.imageUrl}" alt="Slide Image"
                         class="hidden md:block w-[420px] rounded-lg"/>
                </div>
            </div>

            <!-- Dots -->
            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2" id="slider-dots"></div>

            <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng -->
            <button id="prev-btn"
                    class="absolute top-1/2 left-3 -translate-y-1/2 bg-white/20 text-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-white/40">
                &#10094;
            </button>
            <button id="next-btn"
                    class="absolute top-1/2 right-3 -translate-y-1/2 bg-white/20 text-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-white/40">
                &#10095;
            </button>
        </section>


        <section>
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-2xl font-bold">Kh√≥a h·ªçc n·ªïi b·∫≠t
                    <span class="ml-2 text-sm bg-blue-100 text-blue-700 px-2 py-1 rounded">M·ªöI</span>
                </h3>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <div th:each="course : ${featuredCourses}"
                     class="rounded-2xl overflow-hidden shadow hover:shadow-xl transition">
                    <a th:href="@{'/courses/' + ${course.id}}">
                        <img th:src="${course.thumbnailUrl}" class="w-full h-40 object-cover"/>
                    </a>
                    <div class="bg-white p-4 text-gray-700">
                        <p class="font-semibold" th:text="${course.name}">T√™n kh√≥a h·ªçc</p>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-2xl font-bold">B√†i vi·∫øt n·ªïi b·∫≠t</h3>
                <a href="/blog" class="text-orange-500 font-semibold hover:underline">Xem t·∫•t c·∫£ ‚Üí</a>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <div th:each="post : ${hotPosts}" class="bg-white rounded-2xl shadow hover:shadow-lg transition overflow-hidden">
                    <a th:href="@{'/blog/' + ${post.id}}">
                        <img th:src="${post.thumbnailUrl}" alt="Thumbnail"
                             class="w-full h-40 object-cover"/>
                    </a>
                    <div class="p-5">
                        <h4 th:text="${post.title}" class="font-semibold mb-2">Ti√™u ƒë·ªÅ b√†i vi·∫øt</h4>
                        <p th:text="${#dates.format(post.publishedAt, 'dd-MM-yyyy')}" class="text-sm text-gray-500 mb-4">Ng√†y ƒëƒÉng</p>
                        <a th:href="@{'/blog/' + ${post.id}}" class="text-blue-600 font-semibold hover:underline">Xem chi ti·∫øt</a>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h3 class="text-2xl font-bold mb-4">B√†i vi·∫øt m·ªõi nh·∫•t</h3>
            <div class="space-y-4">
                <div th:each="post : ${latestPostsForSidebar}" class="bg-white p-4 rounded-lg shadow-sm flex items-center space-x-4">
                    <img th:src="${post.thumbnailUrl}" class="w-20 h-20 object-cover rounded-md"/>
                    <div>
                        <a th:href="@{'/blog/' + ${post.id}}" class="font-semibold text-gray-800 hover:text-indigo-600" th:text="${post.title}">Ti√™u ƒë·ªÅ b√†i vi·∫øt m·ªõi</a>
                        <p class="text-sm text-gray-500" th:text="${#dates.format(post.publishedAt, 'dd-MM-yyyy')}">Ng√†y ƒëƒÉng</p>
                    </div>
                </div>
            </div>
        </section>

    </main>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const sliderWrapper = document.getElementById('slider-wrapper');
        const sliderDotsContainer = document.getElementById('slider-dots');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        if (sliderWrapper && sliderWrapper.children.length > 0) {
            const slides = sliderWrapper.children;
            const totalSlides = slides.length;
            let currentSlide = 0;

            // T·∫°o dots
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('span');
                dot.classList.add('w-2', 'h-2', 'bg-white/60', 'rounded-full', 'cursor-pointer');
                dot.addEventListener('click', () => { goToSlide(i); });
                sliderDotsContainer.appendChild(dot);
            }
            const dots = sliderDotsContainer.children;

            function updateDots() {
                for (let i = 0; i < dots.length; i++) {
                    dots[i].classList.remove('w-4', 'bg-white');
                    dots[i].classList.add('w-2', 'bg-white/60');
                }
                dots[currentSlide].classList.add('w-4', 'bg-white');
                dots[currentSlide].classList.remove('w-2', 'bg-white/60');
            }

            function goToSlide(slideIndex) {
                currentSlide = slideIndex;
                sliderWrapper.style.transform = `translateX(-${currentSlide * 100}%)`;
                updateDots();
            }

            function nextSlide() {
                let next = (currentSlide + 1) % totalSlides;
                goToSlide(next);
            }

            function prevSlide() {
                let prev = (currentSlide - 1 + totalSlides) % totalSlides;
                goToSlide(prev);
            }

            // T·ª± ƒë·ªông ch·∫°y
            setInterval(nextSlide, 5000);

            // Th√™m event cho n√∫t
            nextBtn.addEventListener('click', nextSlide);
            prevBtn.addEventListener('click', prevSlide);

            updateDots();
        }
    });
</script>

</body>
</html>